<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Christopher Brown" />

<meta name="date" content="2015-10-08" />

<title>optigrab</title>




<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20700px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%201%2E35%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%2010px%3B%0A%20%20padding%3A%204px%3B%0A%20%20width%3A%20400px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%200%2E25em%200%2E75em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%7D%0Apre%20%7B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%20%20%20%20%2F%2A%20Wrap%20long%20lines%20%2A%2F%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0A%20%20font%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%200px%3B%0A%7D%0A%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">optigrab</h1>
<h4 class="author"><em>Christopher Brown</em></h4>
<h4 class="date"><em>2015-10-08</em></h4>
</div>


<blockquote>
<p>Command-line parsing for an R world emphasizing convention over configuration</p>
</blockquote>
<div id="abstract" class="section level2">
<h2>ABSTRACT</h2>
<p><em>optigrab</em> simplifies the creation of command-line interfaces. It favors a easy-to-use, straight-forward conventions that covers 99% of use cases over more complex configuration command-line parsing solutions without sacrificing features when needed.</p>
</div>
<div id="installation" class="section level2">
<h2>INSTALLATION</h2>
<p>From Git Hub:</p>
<pre><code>devtools::install_github('decisionpatterns/optigrab') </code></pre>
<p>From CRAN:</p>
<pre><code>install.packages('optigrab')</code></pre>
</div>
<div id="usage" class="section level2">
<h2>USAGE</h2>
<p>Getting a command-line option, is easy:</p>
<pre><code>opt_get('foo')         # -OR-
foo &lt;- opt_get('foo')  # -OR-</code></pre>
<p>Or, for the truly lazy:</p>
<pre><code>opt_assign('foo')  </code></pre>
<p>Other examples:</p>
<pre><code>name  &lt;- opt_get( 'name' )
dates &lt;- as.Date( opt_get( 'dates', n=2 ) )  # SAME
yesNo &lt;- opt_get( c( 'yes', 'y' ), n=0 )     # LOGICAL  </code></pre>
<p>Generate auto-help:</p>
<pre><code>opt_help()</code></pre>
<p>Get verb command:</p>
<pre><code>opt_get_verb()</code></pre>
<p>Set option style</p>
<pre><code>opt_style(ms_style)
opt_style(java_style)
opt_style(gnu+style)  # The default</code></pre>
</div>
<div id="advantages" class="section level2">
<h2>ADVANTAGES</h2>
<ol style="list-style-type: decimal">
<li><p><em>optigrab</em> is designed for R in mind. Other packages are derive from package written for other languages. This ignores several aspects of the R language such as R’s inherent vectorization.</p></li>
<li><p>It eschews complex and messy configurations that often clutter the head of programs. <em>optigrab</em> favors conventions over configurations (cf. (CoC)[<a href="https://en.wikipedia.org/wiki/Convention_over_configuration" class="uri">https://en.wikipedia.org/wiki/Convention_over_configuration</a>]). This design choice allows for a simple, terse and comprehendible syntax.</p></li>
</ol>
</div>
<div id="design-philosophy" class="section level2">
<h2>DESIGN PHILOSOPHY</h2>
<ul>
<li>Simple, consise, expressive syntax, especially in a <em>pipe-line</em> world</li>
<li>Conventions over Configuration: (CoC)[<a href="https://en.wikipedia.org/wiki/Convention_over_configuration" class="uri">https://en.wikipedia.org/wiki/Convention_over_configuration</a>])</li>
<li>Support common cases over complex/edge cases</li>
<li>Non-destructive to commandArgs array</li>
<li>Feature complete</li>
</ul>
</div>
<div id="features" class="section level2">
<h2>FEATURES</h2>
<ul>
<li>Simple syntax</li>
<li>Support vectorized nature of R language: <code>--dates 2014-01-01 2015-12-31</code></li>
<li>supply convenience functions ** <code>--help</code>, <code>-?</code> for usage information</li>
<li>Supports <em>verb</em> commands, e.g. git <strong>pull</strong></li>
<li>GNU-, Java- and Microsoft-style command line options</li>
</ul>
<div id="limitations-and-features-under-development" class="section level3">
<h3>LIMITATIONS and FEATURES UNDER DEVELOPMENT</h3>
<p>These are things that are not currently supported, but will be coming soon, if requests are made:</p>
<ul>
<li>option bundling, e.g. <code>-xvzf</code> ==&gt; <code>-x -v -z -f</code></li>
<li><p>auto coercions: this is less likely with the popularity of pipe libraries (e.g. <strong>magrittr</strong>, <strong>pipeR</strong>). Coersions are straight-forward.</p>
<p>opt_get(‘count’) %&gt;% as.integer</p></li>
<li><p>Simple syntax for specifying both a short and long option variants.</p></li>
</ul>
</div>
</div>
<div id="background" class="section level2">
<h2>BACKGROUND</h2>
<p>To start, clearing up some nomenclature will be beneficial.</p>
<div id="options-vs-arguments" class="section level3">
<h3>Options vs Arguments</h3>
<p>Command-line options are often referred to as both ‘options’ and ‘arguments’. For this document, the term ‘option(s)’ are preferred. ‘Arguments’ refers to function or method arguments used within the R language or other information on the command line that does not have an option flag.. This distinction makes it clear the difference between those values provided on the command-line (“options”) and those provided to functions and methods (“arguments”).</p>
</div>
<div id="alternatives" class="section level3">
<h3>Alternatives</h3>
<p>There are already at least three command-line option (“CLOs”) processing solutions for R:</p>
<ul>
<li><p><em>commandArgs()</em> from the base package returns the command line arguments from when the R program was invoked. It can be used as a rudimentary method for option retrieval but lacks the features of a full-featured command-line parsing package</p></li>
<li><p>The <em>optparse</em> package follows closely Python’s optparse semantics and syntax. It provides a <code>getopt</code> that emulates C-like behaviors. Both of these are designed for languages signigicantly different from R.</p></li>
<li><p>The <em>argparse</em> package has lots of configurations; if you like writting configuration or need the extra features, this package is for you.</p></li>
<li><p>The <em>getopt</em> package invites users to use <code>optparse</code> and <code>argparse</code>; enough said.</p></li>
</ul>
</div>
<div id="differentiation-from-alternatives" class="section level3">
<h3>Differentiation from Alternatives</h3>
<p>Handling CL options in R is tricky. R variables are not single scalar values, but are vectors that can assume many values. It is not unreasonable to assume that command-line options should accommodate vectors by default.</p>
<p>Common programming practice is to assign one variable at a time each assignment on its ownline. Packages <strong>getopt</strong>, <strong>optparse</strong> and <strong>argparse</strong>; require the user to write a specification that is parses command-line and assigns values all-at-once. For a application that support many options, the specification quickly becomes complex and hard to read/follow/debug. These packages assign values to a list and then subsequently referenced and validated as needed. This means that the logic for parsing the command-line and using those value, e.g. to build objects is often times distant in the program, making debugging doubly hard.</p>
<p>There are good reasons for the specification of option all-at-once. With all specification in one place: * an automatic help file can be provided</p>
<p>The all-at-once specification does not gracefully handle application whose arguments are indeterminant or not known at execution time. This may be typical of certain applications.</p>
<p>While the define-all-at-once syntax works; a better approach is to have the abillity to specify each option when it is needed.</p>
<p>The optigrab package provides a solution to both of these problems. Supplied flags can read and parse command-line options as vectors vectors; and, option parsing can occur incrementally allowing the programmer to deal with each option one-at-a-timei, leading to a more readable syntax.</p>
</div>
</div>
<div id="command-line" class="section level2">
<h2>COMMAND LINE</h2>
<p>There are a number of idioms for specifying program inputs. A fairly typically call will look something like:</p>
<blockquote>
<p>prog –name=val opt1 opt2 target prog [flag[(=| )value [value] [value…] ]… [command] [arg1 [arg2 [argn]]]</p>
</blockquote>
<p>Generically, the GNU-style command-line syntax style that looks like this:</p>
<p>prog [[-n [val1]]|[–name [val1 val2 …]]] command [arg1 …]</p>
<p>The various components:</p>
<pre><code>prog    : the name of the program/script
-n      : short-form option 
valN    : one or more values 
--name  : long-form option 
command : the (sub)command to the program, e.g. programs like git
argN    : Unamed arguments often targets</code></pre>
<p>Though options and arguments both appear on the command line, they are different. Options are denoted with flags and have names that are assigned values. Arguments, on the other hand, are unnamed. This difference is analogous to named and positional arguments in a function call. Unnamed arguments are simpler. They are useful for great when there the supplied values mean the same thing Options are better for complex situations. Arguments are A good CLO processing package provides access to both options and unnamed arguments.</p>
<p>If each option is assumed to take a scalar value, the example is:</p>
<pre><code>prog --name w --name2 x y z</code></pre>
<p>The problem becomes difficult in <em>R</em> when we consider that the variables are vectors and not simple scalars. Variables assume multiple values. Consider the previous example. Is the value of option#2 val2? Or is it (val2, arg1, arg2, arg3)? It is ambiguous.</p>
<p>A good deal of the time, it doesn’t matter. Most often only one value is needed. One solution often deployed. is to always specify the number of values needed by the options.</p>
<div id="options" class="section level3">
<h3>Options</h3>
<p>An option is one or more values provided to the program from the command-line. They: * can be optional or required * have 0 or more values * have a default value * may be coerced into various types or classes</p>
</div>
<div id="unbound-arguments" class="section level3">
<h3>(Unbound) Arguments</h3>
<p>In addition to options, the command line may also contain unbound argument such as one or more file paths. The distinction of between options and arguments is not always clear. Both occur on the command-line and both supply values to the program. The main differnce is that options provide a name and a value and can always appear in any order. This is nice since it requires the user to remember the name of arguments rather than there order. This is cognitively much simpler and is analogous to the difference between calling a function with named arguments rather than positional ones.</p>
<p>Arguments, on the other hand, follow two patterns. They are either all the same type, such as a list of filenames or they are dependent upon the ordering such as x,y,z coordinates. Many programs use both arguments and options. In this situation, it is good practice to have all options preceed all arguments. Some programs allow arguments and options can be interspersed. When interspersed, it becomes cumbersome to seperate options from arguments. In fact, it can be impossible to distinguish the if the number of values supplied for each option is unknown. Thus, it is important to always specify the number of values required by the option.</p>
</div>
<div id="flags" class="section level3">
<h3>Flags</h3>
<ul>
<li><p>Option names are specified with flags. Flags should begin with “–” or “-” followed by one or more alpha-characters. Generally,</p></li>
<li><p>long versions of flags begin with “–” followed by the full name for the option.</p></li>
<li><p>Short versions of the flags begin with a single hyphen, “-” and usually are named with a single alpha-character.</p></li>
<li><p>Many names/aliases for the same option are not a good idea.</p></li>
<li><p>Always have a long version flag.</p></li>
<li><p>Consider short versions for very common arguments.</p></li>
<li><p>Flags should be named with names understandable to the user and not the author.</p></li>
<li><p>All flags and aliases should be explicitly specified.</p></li>
</ul>
</div>
<div id="values" class="section level3">
<h3>Values</h3>
<ul>
<li><p>Are always initially interpretted as character values. Later, they may be coerced into different types.</p></li>
<li><p>Options may have 0, 1 or more values.</p></li>
<li><p>The type of value returned may be specified through a coercion function.</p></li>
<li><p>Only logical options can have 0 values. If present, the option is set to TRUE. Otherwise, it is FALSE. Logical values may take more than 0 values, e.g. if an array of logical is wanted, but by convention should take 0 values for simple options.</p></li>
<li><p>The number of values may be deterministic or indeterminstice. In the later case, it is most common to want at least n values. These values are taken greedily. This is generally not supported.</p></li>
<li><p>Values may also have an indeterminate number of values.</p></li>
<li><p>Flags requested, but not found should return the ‘NA’ value.</p></li>
<li><p>Required values. Values may be required. If this is the case and no value is supplied, then an error should be thrown indicating that a required value was not supplied.</p></li>
<li><p>If a value is not required nor provided, then the default should be used. If no default has been specified than NA should be returned.</p></li>
<li><p>Greediness. One alternative to specifying the number of values is to greedily accept values. Thus, a flag indicates that all the arguments following it should be considered values until either another flag is encountered or the end of the argument array is reached.</p></li>
</ul>
</div>
<div id="logical-values" class="section level3">
<h3>logical values</h3>
<p>Logical values present an interesting challenge to command-line processing. They are the only type that can accept 0 values. In fact, this is the default for logical values. If the flag is present, then the value is set to TRUE otherwise it is set to FALSE or it’s default</p>
</div>
<div id="default-values" class="section level3">
<h3>default values</h3>
<p>The use of default values is an a nice addition to command-line processing.</p>
</div>
<div id="coercion" class="section level3">
<h3>coercion</h3>
<p>Other command-line parsing programs require specification of the options type. This is needlessly verbose for three reasons:</p>
<ul>
<li>Often the developer will need to post-process the option anyhow.</li>
<li>R often does coercisions as needed and explicit coercion is not needed</li>
<li><p>Packages providing a pipe operator already allow for a concise syntax</p>
<p>‘foo’ %&gt;% opt_get %&gt;% as.integer</p></li>
</ul>
<p>In <em>optigrab</em>, flags and values are initially interpreted as strings. These may be subsequently coerced into any valid type or class through a coercion function.</p>
</div>
</div>
<div id="processing" class="section level1">
<h1>PROCESSING</h1>
<p>At present, most command line processing libraries require full specification for all options. This requires a often very complicated specifications at the program’s beginning. Most programs, however, have very simple option processing requirements. It is, therefore, desirable that options be able to be processed with a very simply and clean syntax – one that better fits into the flow of the program. An example would allow the retrival of one option on every line. For example, to get a name and date, you might do the following:</p>
<pre><code>name &lt;- opt_get( &quot;--name&quot; )
date &lt;- opt_get( &quot;--date&quot;, default=Sys.Date )
   </code></pre>
<p>In the first line, all we need to do is specify the option flag. This is because the default is to return a string value or NA if not found. On the second line, the function returns a single value coerced by as.Date. If no value is supplied it defaults to today’s date.</p>
<p>Since the processing of options is serialized, the processing of all options should be done prior to grabing options. If this is done, we can use the <code>opt_get</code> functions to specify do the apriori specifications to handle the</p>
</div>
<div id="batch--vs--interactive-mode" class="section level1">
<h1>BATCH -vs- INTERACTIVE MODE</h1>
<p>Command-line option processing should mostly focus on batch processing since this is the most common usage scenario. Still, processing should work in Interactive mode for development. In fact, in this use case, it is important that the parsing be able to handle an array of options different from the actual arguments used to start the session.</p>
<p>In Batch processing, the preferred way to launch a session is by using Rscript. Rscript introduces several arguments to the command-line. These are:</p>
<pre><code>[1] &quot;/opt/r/R-2.13.0-default/lib/R/bin/exec/R&quot; &quot;--slave&quot;                                    
[3] &quot;--no-restore&quot;                             &quot;--file=./test.r&quot;                             
[5] &quot;--args</code></pre>
<p>These are not really arguments from the script itself, thus all arguments up to and including the first <code>--args</code> are not considered options.</p>
</div>
<div id="references" class="section level1">
<h1>REFERENCES</h1>
<p><em>The Jerk</em>. Dir. Carl Reiner. Perf Steve Martin, Bernadette Peters, Caitlin Adams. Universal Pictures, 1979. <a href="http://www.imdb.com/title/tt0079367/" class="uri">http://www.imdb.com/title/tt0079367/</a></p>
<p><a href="http://www.gnu.org/prep/standards/standards.html">GNU command-line standards</a></p>
<p><a href="https://github.com/gsscoder/commandline">commandline</a></p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
